<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f7f7f7;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #4CAF50;
            color: white;
            padding: 1rem;
            text-align: center;
        }

        main {
            padding: 2rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
        }

        th, td {
            padding: 0.75rem;
            border: 1px solid #ddd;
            text-align: center;
        }

        th {
            background-color: #f2f2f2;
        }

        tr:hover {
            background-color: #f9f9f9;
        }

        form {
            display: inline-block;
            margin: 0;
        }

        input[type="text"], input[type="number"] {
            padding: 0.25rem;
            width: 80px;
        }

        button {
            padding: 0.25rem 0.5rem;
            margin-left: 0.25rem;
        }
    </style>
</head>
<body>
    <header>
        <h1>Dashboard</h1>
        <p>ConnectÃ© en tant que : {{ user.username if user.username else "Inconnu" }}</p>
    </header>
    <main>
        <table>
            <thead>
                <tr>
                    <th>Guild</th>
                    <th>User</th>
                    <th>XP</th>
                    <th>Level</th>
                    <th>Balance</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for u in users %}
                <tr>
                    <td>{{ u["guild_id"] if u["guild_id"] else "N/A" }}</td>
                    <td>{{ u["username"] if u["username"] else u["user_id"] }}</td>
                    <td>{{ u["xp"] if u["xp"] else 0 }}</td>
                    <td>{{ u["level"] if u["level"] else 0 }}</td>
                    <td>{{ u["balance"] if u["balance"] else 0 }}</td>
                    <td>
                        <form action="{{ url_for('update_balance') }}" method="POST">
                            <input type="hidden" name="user_id" value="{{ u['user_id'] }}">
                            <input type="number" name="balance" placeholder="{{ u['balance'] }}">
                            <button type="submit">ðŸ’° Update</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <p>Total balance : {{ total_balance }}</p>
        <p>Users in prison : {{ prison_count }}</p>
        <p>Marriages count : {{ marriages_count }}</p>

        <form action="{{ url_for('toggle_leveling') }}" method="POST">
            <button type="submit">
                {% if leveling.enabled %} DÃ©sactiver Leveling {% else %} Activer Leveling {% endif %}
            </button>
        </form>
    </main>
</body>
</html>
