<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Bot Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
--bg:#1e1f22;
--sidebar:#111214;
--card:#2b2d31;
--hover:#3a3d42;
--accent:#5865F2;
--green:#3ba55d;
--red:#ed4245;
--text:#f2f3f5;
--muted:#9ca3af;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:Inter;}

body{display:flex;background:var(--bg);color:var(--text);}

/* SIDEBAR */
.sidebar{
width:250px;
height:100vh;
background:var(--sidebar);
padding:25px;
}

.logo{
font-size:22px;
font-weight:700;
color:var(--accent);
margin-bottom:40px;
}

.nav-item{
padding:12px;
border-radius:10px;
margin-bottom:8px;
cursor:pointer;
transition:.2s;
}

.nav-item:hover{background:var(--hover);}
.nav-item.active{background:var(--accent);}

/* MAIN */
.main{flex:1;padding:30px;overflow:auto;}

.header{
display:flex;
justify-content:space-between;
margin-bottom:30px;
}

.card{
background:var(--card);
padding:20px;
border-radius:15px;
margin-bottom:25px;
}

.table-container{
background:var(--card);
padding:20px;
border-radius:15px;
}

input,select{
padding:10px;
border:none;
border-radius:8px;
background:#202225;
color:white;
outline:none;
}

table{
width:100%;
border-collapse:collapse;
}

th,td{
padding:12px;
border-top:1px solid #3f4147;
}

th{
cursor:pointer;
color:var(--muted);
}

tr:hover{background:var(--hover);}

.badge{
padding:5px 10px;
border-radius:20px;
font-size:12px;
}

.enabled{background:var(--green);}
.disabled{background:var(--red);}

.action-btn{
background:var(--accent);
border:none;
padding:5px 10px;
border-radius:6px;
cursor:pointer;
color:white;
}

.pagination button{
margin:5px;
}

section{display:none;}
section.active{display:block;}
</style>
</head>

<body>

<div class="sidebar">
<div class="logo">Bot Panel</div>
<div class="nav-item active" onclick="showSection('members')">ðŸ‘¥ Members</div>
<div class="nav-item" onclick="showSection('commands')">âš¡ Commands</div>
</div>

<div class="main">

<div class="header">
<h1>Dashboard</h1>
<div>{{ user.username }}</div>
</div>

<!-- MEMBERS -->
<section id="members" class="active">
<div class="table-container">

<input type="text" id="searchMembers" placeholder="Search members...">

<table id="membersTable">
<thead>
<tr>
<th>User</th>
<th>XP</th>
<th>Level</th>
<th>Money</th>
</tr>
</thead>
<tbody>
{% for u in users %}
<tr>
<td>{{ u.user_id }}</td>
<td>{{ u.xp }}</td>
<td>{{ u.level }}</td>
<td>{{ u.money }}</td>
</tr>
{% endfor %}
</tbody>
</table>

</div>
</section>

<!-- COMMANDS -->
<section id="commands">
<div class="table-container">

<div style="display:flex;gap:15px;margin-bottom:15px;">
<input type="text" id="searchCommands" placeholder="Search commands...">
<select id="filterCategory">
<option value="all">All</option>
<option value="moderation">Moderation</option>
<option value="economy">Economy</option>
<option value="fun">Fun</option>
<option value="utility">Utility</option>
</select>
</div>

<table id="commandsTable">
<thead>
<tr>
<th onclick="sortTable(0)">Name</th>
<th onclick="sortTable(1)">Category</th>
<th>Role</th>
<th>Status</th>
</tr>
</thead>
<tbody id="commandsBody">
{% for cmd in commands %}
<tr>
<td>{{ cmd.name }}</td>
<td>{{ cmd.category }}</td>
<td>{{ cmd.required_role }}</td>
<td>
<span class="badge {{ 'enabled' if cmd.enabled else 'disabled' }}">
{{ 'Enabled' if cmd.enabled else 'Disabled' }}
</span>
</td>
</tr>
{% endfor %}
</tbody>
</table>

<div class="pagination" id="pagination"></div>

</div>
</section>

</div>

<script>
function showSection(id){
document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

/* SEARCH MEMBERS */
document.getElementById("searchMembers").addEventListener("keyup",function(){
let filter=this.value.toLowerCase();
document.querySelectorAll("#membersTable tbody tr").forEach(row=>{
row.style.display=row.innerText.toLowerCase().includes(filter)?"":"none";
});
});

/* SEARCH + FILTER + PAGINATION COMMANDS */
const rowsPerPage=6;
let currentPage=1;

function updateCommands(){
const filter=document.getElementById("searchCommands").value.toLowerCase();
const category=document.getElementById("filterCategory").value;
const rows=[...document.querySelectorAll("#commandsBody tr")];

rows.forEach(row=>{
let text=row.innerText.toLowerCase();
let rowCat=row.children[1].innerText.toLowerCase();
let visible=text.includes(filter);
if(category!="all") visible=visible&&rowCat===category;
row.style.display=visible?"":"none";
});

paginate();
}

function paginate(){
let rows=[...document.querySelectorAll("#commandsBody tr")]
.filter(r=>r.style.display!="none");

let totalPages=Math.ceil(rows.length/rowsPerPage);
rows.forEach((row,i)=>{
row.style.display=(i>= (currentPage-1)*rowsPerPage && i<currentPage*rowsPerPage)?"":"none";
});

let pagination=document.getElementById("pagination");
pagination.innerHTML="";
for(let i=1;i<=totalPages;i++){
let btn=document.createElement("button");
btn.className="action-btn";
btn.innerText=i;
btn.onclick=()=>{currentPage=i;paginate();}
pagination.appendChild(btn);
}
}

function sortTable(n){
let rows=[...document.querySelectorAll("#commandsBody tr")];
rows.sort((a,b)=>{
return a.children[n].innerText.localeCompare(b.children[n].innerText);
});
rows.forEach(r=>document.getElementById("commandsBody").appendChild(r));
paginate();
}

document.getElementById("searchCommands").addEventListener("keyup",()=>{currentPage=1;updateCommands();});
document.getElementById("filterCategory").addEventListener("change",()=>{currentPage=1;updateCommands();});
updateCommands();
</script>

</body>
</html>
