<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<script>
function toggleDarkMode() {
    document.documentElement.classList.toggle('dark');
}
</script>
</head>

<body class="bg-gray-100 text-gray-900 dark:bg-gray-900 dark:text-gray-100 transition duration-300">

<div class="flex min-h-screen">

<!-- SIDEBAR -->
<div class="w-64 bg-white dark:bg-gray-800 shadow-lg p-4">

<h2 class="text-2xl font-bold mb-6">âš¡ Bot Panel</h2>

<!-- User -->
<div class="mb-6">
<p class="font-semibold">ðŸ‘¤ {{ user.username }}</p>
<a href="/logout" class="text-red-600 hover:underline text-sm">Se dÃ©connecter</a>
</div>

<!-- Dark Mode -->
<button onclick="toggleDarkMode()" 
class="mb-6 w-full bg-gray-200 dark:bg-gray-700 px-3 py-2 rounded hover:bg-gray-300 dark:hover:bg-gray-600">
ðŸŒ™ Mode sombre
</button>

<!-- Serveurs -->
<h3 class="font-semibold mb-2">Tes serveurs</h3>
<div class="space-y-2">

{% for guild in guilds %}
<a href="/?guild_id={{ guild.id }}" 
class="flex items-center p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700
{% if selected_guild == guild.id %}bg-gray-200 dark:bg-gray-700{% endif %}">

{% if guild.icon %}
<img src="https://cdn.discordapp.com/icons/{{ guild.id }}/{{ guild.icon }}.png" 
class="w-8 h-8 rounded-full mr-2">
{% else %}
<div class="w-8 h-8 bg-gray-400 rounded-full mr-2"></div>
{% endif %}

<span>{{ guild.name }}</span>
</a>
{% endfor %}

</div>
</div>

<!-- MAIN CONTENT -->
<div class="flex-1 p-8">

<h1 class="text-3xl font-bold mb-6">Dashboard</h1>

{% if selected_guild %}

<!-- Stats -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">

<div class="bg-white dark:bg-gray-800 p-4 rounded shadow">
<p class="text-gray-500 dark:text-gray-400">Balance totale</p>
<p class="text-2xl font-bold">{{ total_balance }}</p>
</div>

<div class="bg-white dark:bg-gray-800 p-4 rounded shadow">
<p class="text-gray-500 dark:text-gray-400">Commandes</p>
<p class="text-2xl font-bold">{{ commands|length }}</p>
</div>

<div class="bg-white dark:bg-gray-800 p-4 rounded shadow">
<p class="text-gray-500 dark:text-gray-400">Membres</p>
<p class="text-2xl font-bold">{{ users|length }}</p>
</div>

</div>

<!-- Commandes -->
<div class="bg-white dark:bg-gray-800 rounded shadow p-6">

<h2 class="text-xl font-semibold mb-4">Gestion des commandes</h2>

<table class="w-full">
<thead class="border-b dark:border-gray-600">
<tr>
<th class="p-2 text-left">Nom</th>
<th class="p-2 text-left">Ã‰tat</th>
<th class="p-2 text-left">Action</th>
</tr>
</thead>

<tbody>

{% for cmd in commands %}
<tr class="border-b dark:border-gray-700">
<td class="p-2">{{ cmd.name }}</td>

<td class="p-2">
{% if cmd.enabled %}
<span class="text-green-600 font-semibold">ActivÃ©e</span>
{% else %}
<span class="text-red-600 font-semibold">DÃ©sactivÃ©e</span>
{% endif %}
</td>

<td class="p-2">
<form method="post" action="/toggle_command">
<input type="hidden" name="command_id" value="{{ cmd.id }}">
<button class="px-3 py-1 rounded text-white
{% if cmd.enabled %}
bg-red-600 hover:bg-red-700
{% else %}
bg-green-600 hover:bg-green-700
{% endif %}
">
Toggle
</button>
</form>
</td>
</tr>
{% endfor %}

</tbody>
</table>

</div>

{% else %}

<div class="bg-white dark:bg-gray-800 p-6 rounded shadow">
SÃ©lectionne un serveur dans la sidebar ðŸ‘ˆ
</div>

{% endif %}

</div>
</div>

</body>
</html>
